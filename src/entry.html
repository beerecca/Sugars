<template>
  <section>
    <h2>${heading}</h2>

    <form role="form" submit.delegate="entry()">

      <div class="form-group">
        <label for="time">Date and Time</label>
        <p>${time}</p>
      </div>

      <div class="form-group panel panel-info">
        <div class="panel-heading">
          <label for="glucose" class="panel-title">Glucose Level (${glucose})</label>
        </div>
        <div class="panel-body">
          <input type="range" value.bind="glucose" class="form-control glucose" min="0" max="30" step="0.5">
        </div>
      </div>

      <div class="form-group panel panel-info">
        <div class="panel-heading">
          <label for="food" class="panel-title">Food</label>
        </div>
        <div class="panel-body">

<!-- get back an array of food from the api
this populates the dropdown, units, defaultAmount, carbs for un-interacted-with ui food items
when dropdown changes, add that object to the chosenfood array for posting back to the api
on start, repeated array has one default item in it
on add, repeated array has one more default item in it

dropdown name
unit

so, unit has to be bound to whatever's selected in the dropdown, from the food array (so lets push default to the beginning of the food array)
but it also has to be bound to the specific item in the chosenFood array

-->

          <div class="foodItem clearfix" repeat.for="efi of entryFoodItems">
            
            <div class="col-xs-11">
              <div class="form-group">
                <select value.bind="efi.foodItem" class="form-control food">
                  <option repeat.for="foodItem of $parent.food" model.bind="foodItem">${foodItem.name}</option>
                </select> <!-- autocomplete, and if nothing in the dropdown is selected, disable the unit field, and save the number of carbs and name to db (maybe also pop a field for units) -->
              </div>

              <div class="form-group input-group">
                <input type="range" value.bind="efi.quantity" class="form-control quantity" min="0" max="10" aria-describedby="units">
                <span class="input-group-addon" id="units">${efi.quantity} ${efi.unit}${efi.plural}</span>
              </div>

              <div class="form-group input-group">
                <input type="range" value.bind="efi.carbs" class="form-control carbs" min="0" step="5" aria-describedby="carbs">
                <span class="input-group-addon" id="carbs">${efi.carbs} grams of carbs</span>
              </div>
            </div>

            <div class="col-xs-1">
              <button click.trigger="removeFood()" type="button" class="btn btn-default btn-sm btn-warning"><i class="fa fa-minus"></i></button>
            </div>

          </div>


          <div class="clearfix">
            <button click.trigger="addFood()" type="button" class="btn btn-default btn-sm btn-primary pull-right"><i class="fa fa-plus"></i></button>
          </div>
        </div>
      </div>

      <div class="form-group panel panel-info">
        <div class="panel-heading">
          <label for="exercise" class="panel-title">Exercise (${exercise})</label>
        </div>
        <div class="panel-body">
          <input type="range" value.bind="exercise" class="form-control exercise" min="0" max="5">
        </div>
      </div>

      <div class="form-group panel panel-success">
        <div class="panel-heading">
          <label for="short" class="panel-title">Short Acting Insulin</label>
        </div>
        <div class="panel-body">
          <input type="number" class="form-control short" value="${calc}" value.bind="short">
        </div>
      </div>

      <button type="submit" class="btn btn-default btn-primary">Submit</button>

    </form>
    <br><br>
    <!--<p>DEBUG: ${(glucose - 7) / 3} normal adjust + ${totalCarbs / 10} food adjust - ${exercise} exercise = ${calc} units</p>--> 

  </section>

</template>
